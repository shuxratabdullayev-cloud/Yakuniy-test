// Bundled JavaScript for Yakuniy Imtixon
// Auto-generated on: 2026-01-17 00:43:00
// DO NOT EDIT THIS FILE DIRECTLY - Edit source files and rebuild


============================================================
// Questions Database
// Source: data/questions.js
============================================================

// Exam questions database for all 7 topics
const examTopics = [
    {
        id: 'kassa-bank',
        name: 'Kassa va Bank',
        icon: 'ðŸ’°',
        description: 'Naqd pul va bank operatsiyalari',
        maxScore: 30
    },
    {
        id: 'ish-haqi',
        name: 'Ish haqi',
        icon: 'ðŸ’¼',
        description: 'Mehnat haqi hisob-kitoblari',
        maxScore: 30
    },
    {
        id: 'asosiy-vositalar',
        name: 'Asosiy vositalar',
        icon: 'ðŸ­',
        description: 'Asosiy vositalar hisobi',
        maxScore: 30
    },
    {
        id: 'av-eskirish',
        name: 'AV eskirish',
        icon: 'ðŸ“‰',
        description: 'Amortizatsiya hisob-kitoblari',
        maxScore: 30
    },
    {
        id: 'kreditorlar',
        name: 'Kreditorlar',
        icon: 'ðŸ“Š',
        description: 'Kreditorlik qarzlari hisobi',
        maxScore: 30
    },
    {
        id: 'materiallar',
        name: 'Materiallar',
        icon: 'ðŸ“¦',
        description: 'Moddiy-texnik ta\'minot hisobi',
        maxScore: 30
    },
    {
        id: 'debitorlar',
        name: 'Debitorlar',
        icon: 'ðŸ’³',
        description: 'Debitorlik qarzlari hisobi',
        maxScore: 30
    }
];

const questions = {
    // ==================== KASSA VA BANK ====================
    'kassa-bank': {
        test: [
            {
                id: 1,
                question: 'Kassada naqd pulning maksimal qoldig\'i qancha bo\'lishi mumkin?',
                options: [
                    'Cheklanmagan',
                    'Bank tomonidan belgilangan limit',
                    '5 million so\'m',
                    '10 million so\'m'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 2,
                question: 'Kassa kitobini kim yuritadi?',
                options: [
                    'Bosh hisobchi',
                    'Kassir',
                    'Direktor',
                    'Nazoratchi'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Kassadan pul chiqimini qaysi hujjat bilan rasmiylashtiriladi?',
                options: [
                    'Kirim orderi',
                    'Chiqim orderi',
                    'Avans hisoboti',
                    'Faktura'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 4,
                question: 'Bank hisobvarag\'i qaysi hisob raqamida yuritiladi?',
                options: [
                    '5010',
                    '5110',
                    '5210',
                    '5310'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 5,
                question: 'Kassaga naqd pul qabul qilinganda qaysi hujjat tuziladi?',
                options: [
                    'Chiqim orderi',
                    'Kirim orderi',
                    'Kassa kitobchasi',
                    'Avans hisoboti'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 6,
                question: 'Bankka naqd pul topshirilganda qaysi provodka tuziladi?',
                options: [
                    'Dt 5010 Kt 5110',
                    'Dt 5110 Kt 5010',
                    'Dt 5210 Kt 5010',
                    'Dt 5010 Kt 6710'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 7,
                question: 'Kassa revizyasini kim o\'tkazadi?',
                options: [
                    'Faqat kassir',
                    'Maxsus komissiya',
                    'Faqat direktor',
                    'Faqat bosh hisobchi'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 8,
                question: 'Kassadan ortiqcha pul topilsa, qaysi hisobga kiritiladi?',
                options: [
                    '9410',
                    '9510',
                    '6710',
                    '5710'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 9,
                question: 'Bank to\'lovi qaysi hujjat bilan rasmiylashtiriladi?',
                options: [
                    'Kirim orderi',
                    'To\'lov topshirig\'i',
                    'Chiqim orderi',
                    'Faktura'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 10,
                question: 'Kassa kitobida xatolik topilsa, nima qilish kerak?',
                options: [
                    'O\'chirib tashlash',
                    'Yangi sahifa ochish',
                    'Chizib, imzo qo\'yish',
                    'E\'tibor bermaslik'
                ],
                correctAnswer: 2,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Korxona bankdan 15,000,000 so\'m naqd pul oldi va kassaga qabul qildi. Ushbu operatsiya uchun buxgalteriya yozuvini tuzing.',
                points: 2
            },
            {
                id: 2,
                question: 'Xodimga ish haqi sifatida kassadan 3,500,000 so\'m to\'landi. Hisob-kitobni amalga oshiring.',
                points: 2
            },
            {
                id: 3,
                question: 'Kassadan ta\'minotchiga 8,200,000 so\'m to\'landi. Qanday provodka tuziladi?',
                points: 2
            },
            {
                id: 4,
                question: 'Korxona kassasiga xaridordan 12,000,000 so\'m tushdi. Buxgalteriya yozuvini yozing.',
                points: 2
            },
            {
                id: 5,
                question: 'Kassa revizyasi natijasida 50,000 so\'m ortiqcha pul topildi. Qanday qayd etiladi?',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Bankdan kassaga 20,000,000 so\'m naqd pul olindi',
                points: 2
            },
            {
                id: 2,
                question: 'Kassadan xodimga avans sifatida 2,000,000 so\'m berildi',
                points: 2
            },
            {
                id: 3,
                question: 'Kassaga mahsulot sotishdan 5,500,000 so\'m tushdi',
                points: 2
            },
            {
                id: 4,
                question: 'Kassadan bankga 10,000,000 so\'m topshirildi',
                points: 2
            },
            {
                id: 5,
                question: 'Kassa kamomadi 100,000 so\'m kassir hisobiga qoplandi',
                points: 2
            }
        ]
    },

    // ==================== ISH HAQI ====================
    'ish-haqi': {
        test: [
            {
                id: 1,
                question: 'Ish haqi qaysi hisob raqamida aks ettiriladi?',
                options: [
                    '6710',
                    '6610',
                    '6510',
                    '6410'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 2,
                question: 'Ish haqidan ushlab qolinadigan asosiy soliq qaysi?',
                options: [
                    'QQS',
                    'Daromad solig\'i',
                    'Mulk solig\'i',
                    'Yer solig\'i'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Jismoniy shaxslarning daromad solig\'i stavkasi necha foiz?',
                options: [
                    '10%',
                    '12%',
                    '15%',
                    '20%'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 4,
                question: 'Ish haqiga hisoblangan INPS qaysi hisobda aks etadi?',
                options: [
                    '6410',
                    '6510',
                    '6610',
                    '6710'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 5,
                question: 'Kasallik varaqasi bo\'yicha to\'lov qayerdan amalga oshiriladi?',
                options: [
                    'Korxona hisobidan',
                    'INPS hisobidan',
                    'Davlat byudjeti',
                    'Sug\'urta kompaniyasi'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 6,
                question: 'Ish haqi fondi qaysi xarajat hisobida aks etadi?',
                options: [
                    '9010',
                    '9110',
                    '9210',
                    '9410'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 7,
                question: 'Xodimga berilgan avans qaysi hisobda ko\'rsatiladi?',
                options: [
                    '4010',
                    '4210',
                    '5610',
                    '6710'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 8,
                question: 'Ish haqidan ushlab qolingan daromad solig\'i qaysi hisobda?',
                options: [
                    '6410',
                    '6510',
                    '6610',
                    '6710'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 9,
                question: 'Mehnat haqi hisob-kitob varaqasi nima deb ataladi?',
                options: [
                    'Tabel',
                    'Vedomost',
                    'Nakladnaya',
                    'Akt'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 10,
                question: 'Ish haqi to\'lanmagan xodim qarzini qaysi hisob ko\'rsatadi?',
                options: [
                    '6710',
                    '6610',
                    '6510',
                    '5610'
                ],
                correctAnswer: 0,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Xodimning oylik ish haqi 5,000,000 so\'m. Daromad solig\'i (12%) va INPS (0.1%) ni hisoblab, qo\'lga beriladigan summani aniqlang.',
                points: 2
            },
            {
                id: 2,
                question: 'Ishlab chiqarish xodimlariga 25,000,000 so\'m ish haqi hisoblandi. Provodkani yozing.',
                points: 2
            },
            {
                id: 3,
                question: 'Xodimga avans sifatida 2,000,000 so\'m berildi. Oylik ish haqi 4,500,000 so\'m. Yakuniy to\'lovni hisoblang.',
                points: 2
            },
            {
                id: 4,
                question: 'Ish haqidan ushlab qolingan daromad solig\'i 3,600,000 so\'m byudjetga o\'tkazildi. Provodka?',
                points: 2
            },
            {
                id: 5,
                question: 'Kasallik varaqasi bo\'yicha xodimga 1,500,000 so\'m to\'landi. Buxgalteriya yozuvini tuzing.',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Ishlab chiqarish xodimlariga ish haqi 30,000,000 so\'m hisoblandi',
                points: 2
            },
            {
                id: 2,
                question: 'Ish haqidan daromad solig\'i 3,600,000 so\'m ushlab qolindi',
                points: 2
            },
            {
                id: 3,
                question: 'Ish haqidan INPS 30,000 so\'m ushlab qolindi',
                points: 2
            },
            {
                id: 4,
                question: 'Xodimga kassadan ish haqi 4,200,000 so\'m to\'landi',
                points: 2
            },
            {
                id: 5,
                question: 'Daromad solig\'i 3,600,000 so\'m bankdan byudjetga o\'tkazildi',
                points: 2
            }
        ]
    },

    // ==================== ASOSIY VOSITALAR ====================
    'asosiy-vositalar': {
        test: [
            {
                id: 1,
                question: 'Asosiy vositalar qaysi hisob raqamida hisoblanadi?',
                options: [
                    '0100',
                    '0200',
                    '0300',
                    '0400'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 2,
                question: 'Asosiy vositalarning foydalanish muddati kamida necha yil?',
                options: [
                    '6 oy',
                    '1 yil',
                    '2 yil',
                    '3 yil'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Asosiy vosita sotib olinganda QQS qaysi hisobda aks etadi?',
                options: [
                    '4410',
                    '4510',
                    '6410',
                    '6510'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 4,
                question: 'Asosiy vositani ishga tushirish qaysi hujjat bilan rasmiylashtiriladi?',
                options: [
                    'Faktura',
                    'Akt',
                    'Nakladnaya',
                    'Dogovor'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 5,
                question: 'Asosiy vositaning dastlabki qiymati nimani o\'z ichiga oladi?',
                options: [
                    'Faqat sotib olish narxi',
                    'Narx + yetkazib berish + o\'rnatish',
                    'Faqat yetkazib berish',
                    'Faqat o\'rnatish'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 6,
                question: 'Asosiy vositani bepul olish qaysi hisobdan aks ettiriladi?',
                options: [
                    '9410',
                    '9510',
                    '6710',
                    '8310'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 7,
                question: 'Asosiy vositani sotishdan foyda qaysi hisobda?',
                options: [
                    '9110',
                    '9210',
                    '9310',
                    '9410'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 8,
                question: 'Asosiy vositani ta\'mirlash xarajatlari qayerga kiritiladi?',
                options: [
                    'Dastlabki qiymatga',
                    'Davr xarajatlariga',
                    'Eskirish summaga',
                    'Kapital qo\'yilmaga'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 9,
                question: 'Asosiy vositalar inventarizatsiyasi qachon o\'tkaziladi?',
                options: [
                    'Har oy',
                    'Har chorak',
                    'Yiliga 1 marta',
                    '3 yilda 1 marta'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 10,
                question: 'Yaroqsiz asosiy vosita qaysi hisob orqali hisobdan chiqariladi?',
                options: [
                    '0100',
                    '0120',
                    '0130',
                    '0200'
                ],
                correctAnswer: 1,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Korxona stanok sotib oldi: narxi 50,000,000 so\'m, yetkazib berish 2,000,000 so\'m, o\'rnatish 1,500,000 so\'m. Dastlabki qiymatni hisoblang.',
                points: 2
            },
            {
                id: 2,
                question: 'Asosiy vosita (dastlabki qiymati 30,000,000 so\'m) ishga tushirildi. Provodkani yozing.',
                points: 2
            },
            {
                id: 3,
                question: 'Asosiy vosita 25,000,000 so\'mga sotildi. Uning qoldiq qiymati 20,000,000 so\'m. Foyda/zararni aniqlang.',
                points: 2
            },
            {
                id: 4,
                question: 'Bepul olingan asosiy vositaning bozor qiymati 15,000,000 so\'m. Qanday qayd etiladi?',
                points: 2
            },
            {
                id: 5,
                question: 'Asosiy vositani ta\'mirlash uchun 3,000,000 so\'m sarflandi. Provodka?',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Asosiy vosita sotib olindi: 40,000,000 so\'m (QQS 4,800,000 so\'m)',
                points: 2
            },
            {
                id: 2,
                question: 'Asosiy vosita ishga tushirildi: dastlabki qiymati 45,000,000 so\'m',
                points: 2
            },
            {
                id: 3,
                question: 'Asosiy vosita sotildi: qoldiq qiymati 20,000,000 so\'m',
                points: 2
            },
            {
                id: 4,
                question: 'Sotishdan tushum: 28,000,000 so\'m (QQS 3,360,000 so\'m)',
                points: 2
            },
            {
                id: 5,
                question: 'Asosiy vositani sotishdan foyda 4,640,000 so\'m aniqlandi',
                points: 2
            }
        ]
    },

    // ==================== AV ESKIRISH ====================
    'av-eskirish': {
        test: [
            {
                id: 1,
                question: 'Amortizatsiya qaysi hisob raqamida to\'planadi?',
                options: [
                    '0200',
                    '0210',
                    '0220',
                    '0230'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 2,
                question: 'Chiziqli amortizatsiya usulida oylik stavka qanday hisoblanadi?',
                options: [
                    'Qiymat / muddat',
                    'Qiymat / muddat / 12',
                    'Qiymat * stavka',
                    'Qiymat - qoldiq'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Amortizatsiya qachondan boshlab hisoblanadi?',
                options: [
                    'Sotib olingan kundan',
                    'Ishga tushirilgan oydan keyin',
                    'Yil boshidan',
                    'Chorak boshidan'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 4,
                question: 'Amortizatsiya hisoblash uchun minimal qiymat chegarasi?',
                options: [
                    'Cheklanmagan',
                    '1,000,000 so\'m',
                    '5,000,000 so\'m',
                    '10,000,000 so\'m'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 5,
                question: 'Ishlab chiqarish asosiy vositalari amortizatsiyasi qaysi hisobga?',
                options: [
                    '9010',
                    '9110',
                    '9210',
                    '9410'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 6,
                question: 'Qoldiq qiymat qanday aniqlanadi?',
                options: [
                    'Dastlabki qiymat - amortizatsiya',
                    'Dastlabki qiymat + amortizatsiya',
                    'Dastlabki qiymat * stavka',
                    'Bozor qiymati'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 7,
                question: 'Tezlashtirilgan amortizatsiya qachon qo\'llaniladi?',
                options: [
                    'Hech qachon',
                    'Texnologik jihatdan eskiradigan ob\'ektlarda',
                    'Barcha ob\'ektlarda',
                    'Faqat binolarda'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 8,
                question: 'Yer uchastkalariga amortizatsiya hisoblanadimi?',
                options: [
                    'Ha',
                    'Yo\'q',
                    'Ba\'zan',
                    'Faqat shahar yerlariga'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 9,
                question: 'Amortizatsiya to\'xtatilgan asosiy vosita qayerda ko\'rsatiladi?',
                options: [
                    '0100',
                    '0110',
                    '0120',
                    '0130'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 10,
                question: 'To\'liq amortizatsiyalangan asosiy vosita hisobdan chiqariladimi?',
                options: [
                    'Darhol chiqariladi',
                    'Foydalanilguncha hisobda qoladi',
                    'Yil oxirida chiqariladi',
                    'Direktor qaroriga ko\'ra'
                ],
                correctAnswer: 1,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Asosiy vosita qiymati 24,000,000 so\'m, foydalanish muddati 5 yil. Chiziqli usulda oylik amortizatsiyani hisoblang.',
                points: 2
            },
            {
                id: 2,
                question: 'Ishlab chiqarish uskunasi uchun oylik amortizatsiya 500,000 so\'m hisoblandi. Provodka?',
                points: 2
            },
            {
                id: 3,
                question: 'Dastlabki qiymati 36,000,000 so\'m, to\'plangan amortizatsiya 12,000,000 so\'m. Qoldiq qiymatni aniqlang.',
                points: 2
            },
            {
                id: 4,
                question: 'Bino uchun yillik amortizatsiya 6,000,000 so\'m. Oylik amortizatsiya summasi?',
                points: 2
            },
            {
                id: 5,
                question: 'Savdo asosiy vositalari uchun oylik amortizatsiya 300,000 so\'m. Qaysi hisobga kiritiladi?',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Ishlab chiqarish uskunasi uchun oylik amortizatsiya 800,000 so\'m',
                points: 2
            },
            {
                id: 2,
                question: 'Boshqaruv binosi uchun oylik amortizatsiya 1,200,000 so\'m',
                points: 2
            },
            {
                id: 3,
                question: 'Savdo zali jihozlari uchun oylik amortizatsiya 400,000 so\'m',
                points: 2
            },
            {
                id: 4,
                question: 'Transport vositalari uchun oylik amortizatsiya 600,000 so\'m',
                points: 2
            },
            {
                id: 5,
                question: 'Kompyuter texnikasi uchun oylik amortizatsiya 250,000 so\'m',
                points: 2
            }
        ]
    },

    // ==================== KREDITORLAR ====================
    'kreditorlar': {
        test: [
            {
                id: 1,
                question: 'Kreditorlik qarzlari qaysi hisob guruhida aks etadi?',
                options: [
                    '4000',
                    '5000',
                    '6000',
                    '7000'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 2,
                question: 'Ta\'minotchilarga qarz qaysi hisobda ko\'rsatiladi?',
                options: [
                    '6010',
                    '6110',
                    '6210',
                    '6310'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 3,
                question: 'Byudjet oldidagi qarz qaysi hisobda?',
                options: [
                    '6310',
                    '6410',
                    '6510',
                    '6610'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 4,
                question: 'Xodimlarga ish haqi bo\'yicha qarz qaysi hisobda?',
                options: [
                    '6610',
                    '6710',
                    '6810',
                    '6910'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 5,
                question: 'Qisqa muddatli kredit qaysi hisobda aks etadi?',
                options: [
                    '6610',
                    '6710',
                    '6810',
                    '6910'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 6,
                question: 'Kreditorlik qarzining muddati o\'tganda nima qilinadi?',
                options: [
                    'Hisobdan chiqariladi',
                    'Daromadga kiritiladi',
                    'Eskirgan qarzga o\'tkaziladi',
                    'Hech narsa'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 7,
                question: 'Ta\'minotchiga avans to\'langanda qaysi hisob debetlanadi?',
                options: [
                    '6010',
                    '6110',
                    '4010',
                    '4110'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 8,
                question: 'Kreditorlik qarzini to\'lash muddati qancha?',
                options: [
                    '30 kun',
                    '60 kun',
                    'Shartnomaga ko\'ra',
                    '1 yil'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 9,
                question: 'Kreditorlik qarzini inventarizatsiya qilish majburiyatimi?',
                options: [
                    'Ha',
                    'Yo\'q',
                    'Ixtiyoriy',
                    'Faqat yil oxirida'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 10,
                question: 'Kredit foizlari qaysi hisobda aks etadi?',
                options: [
                    '9410',
                    '9510',
                    '9610',
                    '9710'
                ],
                correctAnswer: 0,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Ta\'minotchidan 15,000,000 so\'mlik material keldi (QQS 1,800,000 so\'m). Hali to\'lanmagan. Provodka?',
                points: 2
            },
            {
                id: 2,
                question: 'Ta\'minotchiga qarz 20,000,000 so\'m bankdan to\'landi. Buxgalteriya yozuvini tuzing.',
                points: 2
            },
            {
                id: 3,
                question: 'Xodimlarga ish haqi 18,000,000 so\'m hisoblandi, lekin hali to\'lanmagan. Qanday qayd etiladi?',
                points: 2
            },
            {
                id: 4,
                question: 'Byudjetga soliq 5,000,000 so\'m to\'landi. Provodka?',
                points: 2
            },
            {
                id: 5,
                question: 'Bankdan 50,000,000 so\'m kredit olindi. Buxgalteriya yozuvini yozing.',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Ta\'minotchidan 25,000,000 so\'mlik tovar keldi (hali to\'lanmagan)',
                points: 2
            },
            {
                id: 2,
                question: 'Ta\'minotchiga qarz 25,000,000 so\'m to\'landi',
                points: 2
            },
            {
                id: 3,
                question: 'Xodimlarga ish haqi 12,000,000 so\'m hisoblandi',
                points: 2
            },
            {
                id: 4,
                question: 'Byudjetga QQS 8,000,000 so\'m to\'landi',
                points: 2
            },
            {
                id: 5,
                question: 'Bankdan qisqa muddatli kredit 30,000,000 so\'m olindi',
                points: 2
            }
        ]
    },

    // ==================== MATERIALLAR ====================
    'materiallar': {
        test: [
            {
                id: 1,
                question: 'Materiallar qaysi hisob raqamida hisoblanadi?',
                options: [
                    '1010',
                    '1020',
                    '1030',
                    '1040'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 2,
                question: 'Materiallarning dastlabki qiymati nimani o\'z ichiga oladi?',
                options: [
                    'Faqat sotib olish narxi',
                    'Narx + transport + bojxona',
                    'Faqat transport',
                    'Bozor narxi'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Materiallar ishlab chiqarishga berilganda qaysi hisob debetlanadi?',
                options: [
                    '2010',
                    '8010',
                    '9010',
                    '1010'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 4,
                question: 'Material qoldig\'ini baholash qaysi usul bilan amalga oshiriladi?',
                options: [
                    'Faqat FIFO',
                    'FIFO, LIFO, o\'rtacha',
                    'Faqat o\'rtacha',
                    'Bozor narxi'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 5,
                question: 'Materiallar inventarizatsiyasi qachon o\'tkaziladi?',
                options: [
                    'Har oy',
                    'Har chorak',
                    'Yiliga kamida 1 marta',
                    'Hech qachon'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 6,
                question: 'Ortiqcha material topilsa qaysi hisobga kiritiladi?',
                options: [
                    '9410',
                    '9510',
                    '6710',
                    '1010'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 7,
                question: 'Material kamomadi kim hisobiga qoplanadi?',
                options: [
                    'Korxona',
                    'Aybdor shaxs',
                    'Davlat',
                    'Hech kim'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 8,
                question: 'Yordamchi materiallar qaysi hisobda?',
                options: [
                    '1010',
                    '1020',
                    '1030',
                    '1040'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 9,
                question: 'Materiallarni sotishdan tushum qaysi hisobda?',
                options: [
                    '9010',
                    '9110',
                    '9410',
                    '4610'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 10,
                question: 'Material sotib olinganda QQS qaysi hisobda?',
                options: [
                    '4410',
                    '4510',
                    '6410',
                    '6510'
                ],
                correctAnswer: 2,
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Korxona 10,000,000 so\'mlik material sotib oldi (QQS 1,200,000 so\'m). Provodkani yozing.',
                points: 2
            },
            {
                id: 2,
                question: 'Ishlab chiqarishga 8,000,000 so\'mlik material berildi. Buxgalteriya yozuvini tuzing.',
                points: 2
            },
            {
                id: 3,
                question: 'Material inventarizatsiyasida 500,000 so\'mlik ortiqcha topildi. Qanday qayd etiladi?',
                points: 2
            },
            {
                id: 4,
                question: 'Material kamomadi 300,000 so\'m aybdor shaxs hisobiga qoplandi. Provodka?',
                points: 2
            },
            {
                id: 5,
                question: 'Yaroqsiz material 200,000 so\'mga sotildi. Buxgalteriya yozuvini yozing.',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Material sotib olindi: 15,000,000 so\'m (QQS 1,800,000 so\'m)',
                points: 2
            },
            {
                id: 2,
                question: 'Material omborga qabul qilindi: 15,000,000 so\'m',
                points: 2
            },
            {
                id: 3,
                question: 'Ishlab chiqarishga material berildi: 12,000,000 so\'m',
                points: 2
            },
            {
                id: 4,
                question: 'Material ortiqchasi topildi: 400,000 so\'m',
                points: 2
            },
            {
                id: 5,
                question: 'Material kamomadi aybdor hisobiga qoplandi: 250,000 so\'m',
                points: 2
            }
        ]
    },

    // ==================== DEBITORLAR ====================
    'debitorlar': {
        test: [
            {
                id: 1,
                question: 'Debitorlik qarzlari qaysi hisob guruhida aks etadi?',
                options: [
                    '4000',
                    '5000',
                    '6000',
                    '7000'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 2,
                question: 'Xaridorlar qarzlari qaysi hisobda ko\'rsatiladi?',
                options: [
                    '4010',
                    '4110',
                    '4210',
                    '4310'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 3,
                question: 'Xodimlarga berilgan avans qaysi hisobda?',
                options: [
                    '4010',
                    '4210',
                    '5610',
                    '6710'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 4,
                question: 'Debitorlik qarzining muddati o\'tganda nima qilinadi?',
                options: [
                    'Hisobdan chiqariladi',
                    'Xarajatga kiritiladi',
                    'Eskirgan qarzga o\'tkaziladi',
                    'Kutiladi'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 5,
                question: 'Shubhali qarzlar uchun zahira qaysi hisobda?',
                options: [
                    '4210',
                    '4220',
                    '4230',
                    '4240'
                ],
                correctAnswer: 1,
                points: 1
            },
            {
                id: 6,
                question: 'Xaridordan avans olinganda qaysi hisob kreditlanadi?',
                options: [
                    '4010',
                    '5210',
                    '6210',
                    '4610'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 7,
                question: 'Debitorlik qarzini inventarizatsiya qilish majburiyatimi?',
                options: [
                    'Ha',
                    'Yo\'q',
                    'Ixtiyoriy',
                    'Faqat yil oxirida'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 8,
                question: 'Xodim avansini qaytarish muddati qancha?',
                options: [
                    '3 kun',
                    '7 kun',
                    '30 kun',
                    'Belgilanmagan'
                ],
                correctAnswer: 0,
                points: 1
            },
            {
                id: 9,
                question: 'Eskirgan qarz qaysi hisobga o\'tkaziladi?',
                options: [
                    '9410',
                    '9510',
                    '9610',
                    '9710'
                ],
                correctAnswer: 2,
                points: 1
            },
            {
                id: 10,
                question: 'Debitorlik qarzini undirish uchun sud xarajatlari qayerga?',
                options: [
                    '9010',
                    '9110',
                    '9210',
                    '9410'
                ],
                points: 1
            }
        ],
        practical: [
            {
                id: 1,
                question: 'Xaridorga 20,000,000 so\'mlik mahsulot sotildi (QQS 2,400,000 so\'m). Hali to\'lanmagan. Provodka?',
                points: 2
            },
            {
                id: 2,
                question: 'Xaridordan qarz 25,000,000 so\'m bankka tushdi. Buxgalteriya yozuvini tuzing.',
                points: 2
            },
            {
                id: 3,
                question: 'Xodimga xizmat safari uchun avans 3,000,000 so\'m berildi. Qanday qayd etiladi?',
                points: 2
            },
            {
                id: 4,
                question: 'Xodim avans hisobotini topshirdi: sarflangan 2,800,000 so\'m. Qolgan pul qaytarildi. Provodka?',
                points: 2
            },
            {
                id: 5,
                question: 'Eskirgan debitorlik qarzi 1,500,000 so\'m xarajatga kiritildi. Buxgalteriya yozuvini yozing.',
                points: 2
            }
        ],
        accounting: [
            {
                id: 1,
                question: 'Xaridorga mahsulot sotildi: 30,000,000 so\'m (QQS 3,600,000 so\'m)',
                points: 2
            },
            {
                id: 2,
                question: 'Xaridordan to\'lov bankka tushdi: 33,600,000 so\'m',
                points: 2
            },
            {
                id: 3,
                question: 'Xodimga avans berildi: 2,500,000 so\'m',
                points: 2
            },
            {
                id: 4,
                question: 'Xodim avans hisobotini topshirdi: 2,300,000 so\'m',
                points: 2
            },
            {
                id: 5,
                question: 'Qolgan avans xodimdan qaytarildi: 200,000 so\'m',
                points: 2
            }
        ]
    }
};


============================================================
// Timer Utility
// Source: utils/timer.js
============================================================

// Timer utility functions
class ExamTimer {
    constructor(durationMinutes, onTick, onComplete) {
        this.duration = durationMinutes * 60; // Convert to seconds
        this.remaining = this.duration;
        this.onTick = onTick;
        this.onComplete = onComplete;
        this.interval = null;
        this.isPaused = false;
    }

    start() {
        if (this.interval) return;
        
        this.interval = setInterval(() => {
            if (!this.isPaused) {
                this.remaining--;
                
                if (this.remaining <= 0) {
                    this.stop();
                    if (this.onComplete) this.onComplete();
                } else {
                    if (this.onTick) this.onTick(this.getFormattedTime());
                }
            }
        }, 1000);
    }

    stop() {
        if (this.interval) {
            clearInterval(this.interval);
            this.interval = null;
        }
    }

    pause() {
        this.isPaused = true;
    }

    resume() {
        this.isPaused = false;
    }

    getFormattedTime() {
        const minutes = Math.floor(this.remaining / 60);
        const seconds = this.remaining % 60;
        return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    getProgress() {
        return ((this.duration - this.remaining) / this.duration) * 100;
    }
}


============================================================
// Storage Utility
// Source: utils/storage.js
============================================================

// Storage utility functions
const Storage = {
    // Save exam state
    saveExamState(topic, answers) {
        const state = {
            topic,
            answers,
            timestamp: new Date().toISOString()
        };
        localStorage.setItem('currentExam', JSON.stringify(state));
    },

    // Get exam state
    getExamState() {
        const state = localStorage.getItem('currentExam');
        return state ? JSON.parse(state) : null;
    },

    // Clear exam state
    clearExamState() {
        localStorage.removeItem('currentExam');
    },

    // Grade exam answers
    gradeExam(topicId, answers, topicQuestions) {
        let score = 0;
        let maxScore = 0;
        let results = { test: [], practical: [], accounting: [] };

        // Grade test questions
        if (answers.test && topicQuestions.test) {
            topicQuestions.test.forEach((q) => {
                maxScore += q.points;
                const studentAnswer = answers.test[q.id];
                const isCorrect = q.correctAnswer !== undefined && studentAnswer === q.correctAnswer;
                if (isCorrect) score += q.points;

                results.test.push({
                    question: q.question,
                    studentAnswer: studentAnswer,
                    correctAnswer: q.correctAnswer,
                    isCorrect: isCorrect,
                    points: isCorrect ? q.points : 0
                });
            });
        }

        // Store practical answers without auto-grading
        if (answers.practical && topicQuestions.practical) {
            results.practical = topicQuestions.practical.map((q) => ({
                question: q.question,
                answer: answers.practical[q.id] || '',
                points: q.points
            }));
            maxScore += results.practical.reduce((sum, q) => sum + q.points, 0);
        }

        // Store accounting answers without auto-grading
        if (answers.accounting && topicQuestions.accounting) {
            results.accounting = topicQuestions.accounting.map((q) => ({
                question: q.question,
                debet: answers.accounting[q.id]?.debet || '',
                kredit: answers.accounting[q.id]?.kredit || '',
                points: q.points
            }));
            maxScore += results.accounting.reduce((sum, q) => sum + q.points, 0);
        }

        return { score, maxScore, results };
    },

    // Save completed exam
    saveCompletedExam(topic, answers, timeSpent, studentInfo, grading) {
        const exams = this.getCompletedExams();
        exams.push({
            topic,
            answers,
            grading,
            score: grading.score,
            maxScore: grading.maxScore,
            timeSpent,
            studentName: studentInfo?.name || '',
            studentGroup: studentInfo?.group || '',
            completedAt: new Date().toISOString()
        });
        localStorage.setItem('completedExams', JSON.stringify(exams));
    },

    // Get completed exams
    getCompletedExams() {
        const exams = localStorage.getItem('completedExams');
        return exams ? JSON.parse(exams) : [];
    },

    // Check if topic already taken
    isTopicCompleted(topic) {
        const exams = this.getCompletedExams();
        return exams.some(exam => exam.topic === topic);
    },

    // Get admin statistics
    getAdminStats() {
        const exams = this.getCompletedExams();
        return {
            totalExams: exams.length,
            exams: exams.map(exam => ({
                topic: exam.topic,
                studentName: exam.studentName || '',
                studentGroup: exam.studentGroup || '',
                completedAt: new Date(exam.completedAt).toLocaleString('uz-UZ'),
                timeSpent: exam.timeSpent,
                score: exam.score || 0,
                maxScore: exam.maxScore || 30,
                grading: exam.grading || { results: { test: [], practical: [], accounting: [] } },
                totalAnswers: Object.values(exam.answers).reduce((total, section) => {
                    return total + (typeof section === 'object' ? Object.keys(section).length : 0);
                }, 0)
            }))
        };
    },

    // Save user info
    saveUserInfo(name, group) {
        localStorage.setItem('userInfo', JSON.stringify({ name, group }));
    },

    // Get user info
    getUserInfo() {
        const info = localStorage.getItem('userInfo');
        return info ? JSON.parse(info) : null;
    }
};


============================================================
// Main Application
// Source: app.js
============================================================

// Global state
let currentTopic = null;
let currentAnswers = {};
let examTimer = null;
let studentInfo = null;
let pendingTopicId = null;

// DOM Elements
const homePage = document.getElementById('homePage');
const examPage = document.getElementById('examPage');
const resultPage = document.getElementById('resultPage');
const topicsGrid = document.getElementById('topicsGrid');
const examTitle = document.getElementById('examTitle');
const timerDisplay = document.getElementById('timer');
const progressFill = document.getElementById('progressFill');
const testQuestions = document.getElementById('testQuestions');
const practicalQuestions = document.getElementById('practicalQuestions');
const accountingQuestions = document.getElementById('accountingQuestions');
const submitBtn = document.getElementById('submitBtn');
const adminBtn = document.getElementById('adminBtn');
const adminPanel = document.getElementById('adminPanel');
const adminContent = document.getElementById('adminContent');
const studentModal = document.getElementById('studentModal');
const studentForm = document.getElementById('studentForm');
const cancelBtn = document.getElementById('cancelBtn');

// Initialize app
document.addEventListener('DOMContentLoaded', () => {
    loadTopics();
    setupEventListeners();
    checkExamState();
});

// Load topics on home page
function loadTopics() {
    topicsGrid.innerHTML = '';

    examTopics.forEach(topic => {
        const isCompleted = Storage.isTopicCompleted(topic.id);

        const card = document.createElement('div');
        card.className = 'topic-card';
        if (isCompleted) {
            card.style.opacity = '0.6';
            card.style.cursor = 'not-allowed';
        }

        card.innerHTML = `
            <span class="topic-icon">${topic.icon}</span>
            <h3>${topic.name}</h3>
            <p>${topic.description}</p>
            <span class="topic-score">${topic.maxScore} ball</span>
            ${isCompleted ? '<p style="color: var(--success); margin-top: 1rem;">âœ… Topshirilgan</p>' : ''}
        `;

        if (!isCompleted) {
            // Support both click and touch events
            card.addEventListener('click', () => showStudentModal(topic.id));
            card.addEventListener('touchend', (e) => {
                e.preventDefault();
                showStudentModal(topic.id);
            });
        }

        topicsGrid.appendChild(card);
    });
}

// Show student info modal
function showStudentModal(topicId) {
    pendingTopicId = topicId;
    studentModal.classList.add('active');
    // Clear previous values
    document.getElementById('studentName').value = '';
    document.getElementById('studentGroup').value = '';
}

// Start exam
function startExam(topicId) {
    currentTopic = topicId;
    currentAnswers = {};

    const topic = examTopics.find(t => t.id === topicId);
    examTitle.textContent = topic.name;

    // Load questions
    loadQuestions();

    // Start timer (90 minutes)
    examTimer = new ExamTimer(
        90,
        (time) => {
            timerDisplay.textContent = `â±ï¸ ${time}`;
        },
        () => {
            alert('Vaqt tugadi! Imtixon avtomatik topshirildi.');
            submitExam();
        }
    );
    examTimer.start();

    // Show exam page
    showPage('exam');
}

// Load all questions
function loadQuestions() {
    const topicQuestions = questions[currentTopic];

    // Load test questions
    testQuestions.innerHTML = '';
    topicQuestions.test.forEach((q, index) => {
        const questionDiv = createTestQuestion(q, index);
        testQuestions.appendChild(questionDiv);
    });

    // Load practical questions
    practicalQuestions.innerHTML = '';
    topicQuestions.practical.forEach((q, index) => {
        const questionDiv = createPracticalQuestion(q, index);
        practicalQuestions.appendChild(questionDiv);
    });

    // Load accounting questions
    accountingQuestions.innerHTML = '';
    topicQuestions.accounting.forEach((q, index) => {
        const questionDiv = createAccountingQuestion(q, index);
        accountingQuestions.appendChild(questionDiv);
    });
}

// Create test question
function createTestQuestion(question, index) {
    const div = document.createElement('div');
    div.className = 'question';

    const optionsHtml = question.options.map((option, i) => `
        <div class="option">
            <input type="radio" 
                   id="test_${index}_${i}" 
                   name="test_${index}" 
                   value="${i}"
                   onchange="saveAnswer('test', ${question.id}, ${i})">
            <label for="test_${index}_${i}">${option}</label>
        </div>
    `).join('');

    div.innerHTML = `
        <div class="question-header">
            <span class="question-number">Savol ${question.id}</span>
            <span class="question-points">${question.points} ball</span>
        </div>
        <div class="question-text">${question.question}</div>
        <div class="options">
            ${optionsHtml}
        </div>
    `;

    return div;
}

// Create practical question
function createPracticalQuestion(question, index) {
    const div = document.createElement('div');
    div.className = 'question';

    div.innerHTML = `
        <div class="question-header">
            <span class="question-number">Masala ${question.id}</span>
            <span class="question-points">${question.points} ball</span>
        </div>
        <div class="question-text">${question.question}</div>
        <textarea class="answer-input" 
                  placeholder="Javobingizni yozing..."
                  onchange="saveAnswer('practical', ${question.id}, this.value)"></textarea>
    `;

    return div;
}

// Create accounting question
function createAccountingQuestion(question, index) {
    const div = document.createElement('div');
    div.className = 'question';

    div.innerHTML = `
        <div class="question-header">
            <span class="question-number">Provodka ${question.id}</span>
            <span class="question-points">${question.points} ball</span>
        </div>
        <div class="question-text">${question.question}</div>
        <div class="accounting-entry">
            <div class="entry-field">
                <label>Debet (Dt)</label>
                <input type="text" 
                       placeholder="Hisob raqami"
                       onchange="saveAccountingAnswer(${question.id}, 'debet', this.value)">
            </div>
            <div class="entry-field">
                <label>Kredit (Kt)</label>
                <input type="text" 
                       placeholder="Hisob raqami"
                       onchange="saveAccountingAnswer(${question.id}, 'kredit', this.value)">
            </div>
        </div>
    `;

    return div;
}

// Save answer
window.saveAnswer = function (type, questionId, answer) {
    if (!currentAnswers[type]) {
        currentAnswers[type] = {};
    }
    currentAnswers[type][questionId] = answer;

    // Save to localStorage
    Storage.saveExamState(currentTopic, currentAnswers);

    // Update progress
    updateProgress();
};

// Save accounting answer
window.saveAccountingAnswer = function (questionId, field, value) {
    if (!currentAnswers.accounting) {
        currentAnswers.accounting = {};
    }
    if (!currentAnswers.accounting[questionId]) {
        currentAnswers.accounting[questionId] = {};
    }
    currentAnswers.accounting[questionId][field] = value;

    // Save to localStorage
    Storage.saveExamState(currentTopic, currentAnswers);

    // Update progress
    updateProgress();
};

// Update progress bar
function updateProgress() {
    const totalQuestions = 20; // 10 test + 5 practical + 5 accounting
    const answeredCount =
        (currentAnswers.test ? Object.keys(currentAnswers.test).length : 0) +
        (currentAnswers.practical ? Object.keys(currentAnswers.practical).length : 0) +
        (currentAnswers.accounting ? Object.keys(currentAnswers.accounting).length : 0);

    const progress = (answeredCount / totalQuestions) * 100;
    progressFill.style.width = `${progress}%`;
}

// Submit exam
function submitExam() {
    if (examTimer) {
        examTimer.stop();
    }

    // Calculate time spent
    const timeSpent = examTimer ? examTimer.getFormattedTime() : '00:00';

    // Grade the exam
    const topicQuestions = questions[currentTopic];
    const grading = Storage.gradeExam(currentTopic, currentAnswers, topicQuestions);

    // Save completed exam with grading
    Storage.saveCompletedExam(currentTopic, currentAnswers, timeSpent, studentInfo, grading);
    Storage.clearExamState();

    // Show result
    const topic = examTopics.find(t => t.id === currentTopic);
    document.getElementById('completionTime').textContent = new Date().toLocaleString('uz-UZ');
    document.getElementById('resultTopic').textContent = topic.name;

    // Display student info on result page
    const resultInfo = document.querySelector('.result-info');
    if (studentInfo) {
        resultInfo.innerHTML = `
            <p><strong>F.I.O.:</strong> ${studentInfo.name}</p>
            <p><strong>Guruh:</strong> ${studentInfo.group}</p>
            <p><strong>Yakunlangan vaqt:</strong> <span id="completionTime">${new Date().toLocaleString('uz-UZ')}</span></p>
            <p><strong>Mavzu:</strong> <span id="resultTopic">${topic.name}</span></p>
            <div class="score-display">
                <h3>Sizning balingiz:</h3>
                <div class="score-big">${grading.score} / ${grading.maxScore}</div>
                <small>Test savollari: ${grading.results.test.filter(r => r.isCorrect).length} / ${grading.results.test.length} to'g'ri</small>
            </div>
        `;
    }

    // Display test results
    const testResults = document.getElementById('testResults');
    if (testResults && grading.results.test.length > 0) {
        testResults.innerHTML = '<h4>Test natijalari:</h4>' +
            grading.results.test.map((r, i) => `
                <div class="result-item ${r.isCorrect ? 'correct' : 'wrong'}">
                    <span>${i + 1}. ${r.isCorrect ? 'âœ… To\'g\'ri' : 'âŒ Noto\'g\'ri'}</span>
                    ${!r.isCorrect && r.correctAnswer !== undefined ?
                    `<small>To'g'ri javob: ${r.correctAnswer + 1}</small>` : ''}
                </div>
            `).join('');
    }

    showPage('result');
}

// Check if there's an ongoing exam
function checkExamState() {
    const state = Storage.getExamState();
    if (state) {
        const resume = confirm('Tugallanmagan imtixon topildi. Davom ettirasizmi?');
        if (resume) {
            currentTopic = state.topic;
            currentAnswers = state.answers;
            startExam(currentTopic);

            // Restore answers
            restoreAnswers();
        } else {
            Storage.clearExamState();
        }
    }
}

// Restore answers
function restoreAnswers() {
    // Restore test answers
    if (currentAnswers.test) {
        Object.entries(currentAnswers.test).forEach(([questionId, answer]) => {
            const radio = document.querySelector(`input[name="test_${questionId - 1}"][value="${answer}"]`);
            if (radio) radio.checked = true;
        });
    }

    // Restore practical answers
    if (currentAnswers.practical) {
        Object.entries(currentAnswers.practical).forEach(([questionId, answer]) => {
            const textareas = practicalQuestions.querySelectorAll('textarea');
            if (textareas[questionId - 1]) textareas[questionId - 1].value = answer;
        });
    }

    // Restore accounting answers
    if (currentAnswers.accounting) {
        Object.entries(currentAnswers.accounting).forEach(([questionId, answer]) => {
            const entries = accountingQuestions.querySelectorAll('.accounting-entry');
            if (entries[questionId - 1]) {
                const inputs = entries[questionId - 1].querySelectorAll('input');
                if (answer.debet) inputs[0].value = answer.debet;
                if (answer.kredit) inputs[1].value = answer.kredit;
            }
        });
    }

    updateProgress();
}

// Show page
function showPage(page) {
    homePage.classList.remove('active');
    examPage.classList.remove('active');
    resultPage.classList.remove('active');

    if (page === 'home') {
        homePage.classList.add('active');
        loadTopics(); // Reload to show completed status
    } else if (page === 'exam') {
        examPage.classList.add('active');
    } else if (page === 'result') {
        resultPage.classList.add('active');
    }
}

// Setup event listeners
function setupEventListeners() {
    // Submit button
    submitBtn.addEventListener('click', () => {
        const confirm = window.confirm('Imtixonni yakunlashga ishonchingiz komilmi?');
        if (confirm) {
            submitExam();
        }
    });

    // Student form submit
    studentForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('studentName').value.trim();
        const group = document.getElementById('studentGroup').value.trim();

        if (name && group) {
            studentInfo = { name, group };
            studentModal.classList.remove('active');
            startExam(pendingTopicId);
        }
    });

    // Cancel button
    cancelBtn.addEventListener('click', () => {
        studentModal.classList.remove('active');
        pendingTopicId = null;
    });

    // Close modal when clicking outside
    studentModal.addEventListener('click', (e) => {
        if (e.target === studentModal) {
            studentModal.classList.remove('active');
            pendingTopicId = null;
        }
    });

    // Admin button
    adminBtn.addEventListener('click', () => {
        adminPanel.classList.toggle('active');
        if (adminPanel.classList.contains('active')) {
            loadAdminData();
        }
    });

    // Close admin panel when clicking outside
    document.addEventListener('click', (e) => {
        if (!adminPanel.contains(e.target) && e.target !== adminBtn) {
            adminPanel.classList.remove('active');
        }
    });
}

// Load admin data
function loadAdminData() {
    const stats = Storage.getAdminStats();

    if (stats.totalExams === 0) {
        adminContent.innerHTML = '<p style="color: var(--gray);">Hali hech qanday imtixon topshirilmagan.</p>';
        return;
    }

    let html = `
        <div style="margin-bottom: 1rem;">
            <strong>Jami topshirilgan:</strong> ${stats.totalExams} ta imtixon
        </div>
    `;

    stats.exams.forEach((exam, index) => {
        html += `
            <div style="background: var(--light); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <strong>${index + 1}. ${exam.topic}</strong><br>
                <small style="color: var(--gray);">
                    ${exam.studentName ? `ðŸ‘¤ ${exam.studentName}<br>` : ''}
                    ${exam.studentGroup ? `ðŸ“š Guruh: ${exam.studentGroup}<br>` : ''}
                    ðŸ“… ${exam.completedAt}<br>
                    â±ï¸ Qolgan vaqt: ${exam.timeSpent}<br>
                    <strong>ðŸ“Š Ball: ${exam.score}/${exam.maxScore}</strong><br>
                    âœï¸ Javoblar: ${exam.totalAnswers} ta
                </small>
                <button onclick="toggleDetails(${index})" style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                    Javoblarni ko'rish
                </button>
                <div id="details-${index}" style="display:none; margin-top: 1rem; padding: 1rem; background: white; border-radius: 8px;">
                    ${exam.grading && exam.grading.results ? `
                        <h4 style="margin-top: 0;">ðŸ“ Test natijalari:</h4>
                        ${exam.grading.results.test.map((r, i) => `
                            <div style="padding: 0.5rem; margin: 0.25rem 0; border-left: 3px solid ${r.isCorrect ? '#4caf50' : '#f44336'}; background: ${r.isCorrect ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)'};">
                                ${i + 1}. ${r.isCorrect ? 'âœ…' : 'âŒ'} 
                                Javob: ${r.studentAnswer !== undefined ? r.studentAnswer + 1 : 'Berilmagan'}
                                ${!r.isCorrect && r.correctAnswer !== undefined ? ` (To'g'ri: ${r.correctAnswer + 1})` : ''}
                            </div>
                        `).join('')}
                        
                        <h4>ðŸ“‹ Amaliy javoblar:</h4>
                        ${exam.grading.results.practical.map((r, i) => `
                            <div style="padding: 0.5rem; margin: 0.25rem 0; background: #f5f5f5; border-radius: 4px;">
                                <strong>${i + 1}.</strong> ${r.answer || '(Javob berilmagan)'}
                            </div>
                        `).join('')}
                        
                        <h4>ðŸ“Š Buxgalteriya provodkalari:</h4>
                        ${exam.grading.results.accounting.map((r, i) => `
                            <div style="padding: 0.5rem; margin: 0.25rem 0; background: #f5f5f5; border-radius: 4px;">
                                <strong>${i + 1}.</strong> Dt: ${r.debet || '___'}, Kt: ${r.kredit || '___'}
                            </div>
                        `).join('')}
                    ` : '<p>Javoblar ma\'lumoti topilmadi.</p>'}
                </div>
            </div>
        `;
    });

    adminContent.innerHTML = html;
}

// Toggle exam details visibility
window.toggleDetails = function (index) {
    const details = document.getElementById(`details-${index}`);
    if (details) {
        details.style.display = details.style.display === 'none' ? 'block' : 'none';
    }
};

// Prevent accidental page close during exam
window.addEventListener('beforeunload', (e) => {
    if (examPage.classList.contains('active')) {
        e.preventDefault();
        e.returnValue = '';
    }
});

